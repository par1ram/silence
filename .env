# Silence Project Environment Variables
# Universal configuration for both Docker and local development

# =============================================================================
# INFRASTRUCTURE SERVICES
# =============================================================================

# PostgreSQL Configuration
POSTGRES_USER=postgres
POSTGRES_PASSWORD=password
POSTGRES_DB=silence_auth
POSTGRES_PORT=5432

# Redis Configuration
REDIS_PORT=6379

# RabbitMQ Configuration
RABBITMQ_DEFAULT_USER=admin
RABBITMQ_DEFAULT_PASS=admin
RABBITMQ_PORT=5672
RABBITMQ_MANAGEMENT_PORT=15672

# InfluxDB Configuration
INFLUXDB_PORT=8086
DOCKER_INFLUXDB_INIT_MODE=setup
DOCKER_INFLUXDB_INIT_USERNAME=admin
DOCKER_INFLUXDB_INIT_PASSWORD=adminpassword
DOCKER_INFLUXDB_INIT_ORG=silence
DOCKER_INFLUXDB_INIT_BUCKET=analytics
DOCKER_INFLUXDB_INIT_ADMIN_TOKEN=your-influxdb-token

# =============================================================================
# APPLICATION SERVICES PORTS
# =============================================================================

# For Docker (container-to-container communication)
AUTH_HTTP_PORT=8081
GATEWAY_HTTP_PORT=8080
ANALYTICS_HTTP_PORT=8082
SERVER_MANAGER_HTTP_PORT=8085
DPI_BYPASS_HTTP_PORT=8083
VPN_CORE_HTTP_PORT=8084
NOTIFICATIONS_HTTP_PORT=8087

# For Local Development (override these in your shell)
# export HTTP_PORT=9999 (for auth)
# export HTTP_PORT=8000 (for gateway)
# etc.

# =============================================================================
# SERVICE CONFIGURATION
# =============================================================================

# Database Connection (Docker: postgres, Local: localhost)
DB_HOST=postgres
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=password
DB_NAME=silence_auth
DB_SSLMODE=disable

# Redis Connection (Docker: redis, Local: localhost)
REDIS_HOST=redis
REDIS_PORT=6379

# Service URLs for Docker
GATEWAY_AUTH_SERVICE_URL=http://auth:8080
GATEWAY_ANALYTICS_SERVICE_URL=http://analytics:8080
GATEWAY_SERVER_MANAGER_SERVICE_URL=http://server-manager:8085
GATEWAY_DPI_BYPASS_SERVICE_URL=http://dpi-bypass:8080
GATEWAY_VPN_CORE_SERVICE_URL=http://vpn-core:8080

# InfluxDB
INFLUXDB_URL=http://influxdb:8086
INFLUXDB_TOKEN=your-influxdb-token
INFLUXDB_ORG=silence
INFLUXDB_BUCKET=analytics

# RabbitMQ
NOTIFICATIONS_RABBITMQ_URL=amqp://admin:admin@rabbitmq:5672/
NOTIFICATIONS_RABBITMQ_EXCHANGE=notifications
NOTIFICATIONS_RABBITMQ_QUEUE=notifications_queue
NOTIFICATIONS_RABBITMQ_ROUTING_KEY=notifications.*
NOTIFICATIONS_RABBITMQ_CONSUMER_TAG=notifications_consumer
NOTIFICATIONS_RABBITMQ_PREFETCH_COUNT=10
NOTIFICATIONS_ANALYTICS_URL=http://analytics:8080

# =============================================================================
# SHARED CONFIGURATION
# =============================================================================

# Database Names
SERVER_MANAGER_DB_NAME=silence_server_manager
VPN_CORE_DB_NAME=silence_vpn

# Docker
SERVER_MANAGER_DOCKER_HOST=unix:///var/run/docker.sock
SERVER_MANAGER_DOCKER_API_VERSION=1.41
SERVER_MANAGER_DOCKER_TIMEOUT=30s

# Migrations (Docker paths)
AUTH_MIGRATIONS_DIR=/app/migrations
SERVER_MANAGER_MIGRATIONS_DIR=/app/migrations

# =============================================================================
# SECURITY SETTINGS
# =============================================================================

# JWT Settings
JWT_SECRET=your-jwt-secret-key-change-this-in-production
JWT_EXPIRATION=24h
JWT_REFRESH_EXPIRATION=168h
JWT_EXPIRES_IN_HOURS=24

# Encryption
BCRYPT_COST=12

# Rate Limiting
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=1m
RATE_LIMIT_ENABLED=true
RATE_LIMIT_RPS=100
RATE_LIMIT_BURST=200

# Internal API
INTERNAL_API_TOKEN=super-secret-internal-token

# =============================================================================
# DEVELOPMENT SETTINGS
# =============================================================================

# Logging
LOG_LEVEL=info
LOG_FORMAT=json

# CORS
CORS_ALLOWED_ORIGINS=*
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization

# =============================================================================
# DOCKER SPECIFIC
# =============================================================================

# Network
NETWORK_NAME=silence_network

# Volume Names
POSTGRES_VOLUME=postgres_data
REDIS_VOLUME=redis_data
RABBITMQ_VOLUME=rabbitmq_data
INFLUXDB_VOLUME=influxdb_data

# =============================================================================
# LOCAL DEVELOPMENT OVERRIDES
# =============================================================================
# For local development, create a .env.local file with these overrides:
# DB_HOST=localhost
# REDIS_HOST=localhost
# INFLUXDB_URL=http://localhost:8086
# NOTIFICATIONS_RABBITMQ_URL=amqp://admin:admin@localhost:5672/
# AUTH_MIGRATIONS_DIR=./internal/adapters/database/migrations
# SERVER_MANAGER_MIGRATIONS_DIR=./internal/adapters/database/migrations
# HTTP_PORT=9999 (for auth service)
# And other local-specific settings...
