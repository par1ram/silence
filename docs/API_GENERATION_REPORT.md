# –û—Ç—á–µ—Ç –æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

## üéØ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- **–î–æ–±–∞–≤–ª–µ–Ω—ã HTTP –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –≤–æ –≤—Å–µ proto —Ñ–∞–π–ª—ã**
  - `auth.proto` - 11 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
  - `analytics.proto` - 7 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ –º–µ—Ç—Ä–∏–∫
  - `server.proto` - 16 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞–º–∏
  - `vpn.proto` - 10 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –¥–ª—è VPN —Ç—É–Ω–Ω–µ–ª–µ–π –∏ –ø–∏—Ä–æ–≤  
  - `dpi.proto` - 8 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –¥–ª—è –æ–±—Ö–æ–¥–∞ DPI
  - `notifications.proto` - 7 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

- **–ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è**
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω `protoc-gen-openapiv2` –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑ proto —Ñ–∞–π–ª–æ–≤
  - –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç `scripts/merge-swagger.js` –¥–ª—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤
  - –û–±–Ω–æ–≤–ª–µ–Ω Makefile —Å –∫–æ–º–∞–Ω–¥–æ–π `make swagger`

### ‚úÖ Unified API —Å—Ö–µ–º–∞
- **–°–æ–∑–¥–∞–Ω –µ–¥–∏–Ω—ã–π API —Ñ–∞–π–ª** `docs/swagger/unified-api.json`
- **71 API —ç–Ω–¥–ø–æ–∏–Ω—Ç** –æ–±—ä–µ–¥–∏–Ω–µ–Ω—ã –≤ –æ–¥–Ω–æ–π —Å—Ö–µ–º–µ
- **201 –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö** 
- **7 —Ç–µ–≥–æ–≤ —Å–µ—Ä–≤–∏—Å–æ–≤** –¥–ª—è –ª–æ–≥–∏—á–µ—Å–∫–æ–π –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏
- **JWT –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –¥–ª—è –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

### ‚úÖ –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π SDK
- **–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ API —Ö—É–∫–∏** —Å –ø–æ–º–æ—â—å—é `@hey-api/openapi-ts`
- **–°–æ–∑–¥–∞–Ω—ã TypeScript —Ç–∏–ø—ã** –≤ `frontend/src/generated/`
- **–ù–∞—Å—Ç—Ä–æ–µ–Ω—ã —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è API** –≤ `frontend/src/lib/`
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã TypeScript –æ—à–∏–±–∫–∏** –∑–∞–º–µ–Ω–æ–π `any` –Ω–∞ `unknown`

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

| –°–µ—Ä–≤–∏—Å | –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|-----------|----------|
| Auth | 11 | –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ |
| Analytics | 7 | –ú–µ—Ç—Ä–∏–∫–∏, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, –¥–∞—à–±–æ—Ä–¥ |
| Server Manager | 16 | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ VPN —Å–µ—Ä–≤–µ—Ä–∞–º–∏ |
| VPN Core | 10 | –¢—É–Ω–Ω–µ–ª–∏ WireGuard, –ø–∏—Ä—ã |
| DPI Bypass | 8 | –û–±—Ö–æ–¥ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫ DPI |
| Notifications | 7 | –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π |
| Health | 6 | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤ |
| **–ò—Ç–æ–≥–æ** | **71** | **–ü–æ–ª–Ω—ã–π API –¥–ª—è VPN –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã** |

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
```
/api/v1/
‚îú‚îÄ‚îÄ auth/           # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îú‚îÄ‚îÄ users/          # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏  
‚îú‚îÄ‚îÄ servers/        # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞–º–∏
‚îú‚îÄ‚îÄ vpn/            # VPN —Ç—É–Ω–Ω–µ–ª–∏ –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
‚îú‚îÄ‚îÄ analytics/      # –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –º–µ—Ç—Ä–∏–∫–∏
‚îú‚îÄ‚îÄ dpi/            # –û–±—Ö–æ–¥ DPI –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
‚îî‚îÄ‚îÄ notifications/  # –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
```

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- **JWT —Ç–æ–∫–µ–Ω—ã** –¥–ª—è –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- **Bearer —Å—Ö–µ–º–∞** –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ Authorization
- **–ò—Å–∫–ª—é—á–µ–Ω–∏—è** —Ç–æ–ª—å–∫–æ –¥–ª—è health-check —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ –∫–æ–¥–∞
- **Fetch API –∫–ª–∏–µ–Ω—Ç** –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞
- **TypeScript —Ç–∏–ø—ã** –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤
- **React Query —Ö—É–∫–∏** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
- **Error handling** —Å —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –æ—à–∏–±–∫–∞–º–∏

## üîß –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã

```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
make swagger

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ SDK  
make generate-client-sdk

# –ó–∞–ø—É—Å–∫ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ —Å –Ω–æ–≤—ã–º–∏ API —Ö—É–∫–∞–º–∏
make frontend-dev

# –ü—Ä–æ–≤–µ—Ä–∫–∞ API —Å—Ö–µ–º—ã
npm run api:validate
```

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
- `docs/swagger/unified-api.json` - –û–±—ä–µ–¥–∏–Ω–µ–Ω–Ω–∞—è API —Å—Ö–µ–º–∞
- `docs/swagger/*.swagger.json` - –û—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã —Å–µ—Ä–≤–∏—Å–æ–≤
- `scripts/merge-swagger.js` - –°–∫—Ä–∏–ø—Ç –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è

### –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–¥
- `frontend/src/generated/` - –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ API —Ö—É–∫–∏
- `frontend/src/lib/` - –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API
- `frontend/src/generated/types.ts` - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–∏–ø—ã

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ö—É–∫–æ–≤ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API** - —Å–æ–∑–¥–∞–Ω–∏–µ integration —Ç–µ—Å—Ç–æ–≤
3. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤** - Swagger UI –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
4. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è** - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ö–µ–º—ã –≤ CI/CD

## ‚ú® –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ—à–µ–Ω–∏—è

- **–¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è TypeScript —Ç–∏–ø–æ–≤
- **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** - –µ–¥–∏–Ω–∞—è —Å—Ö–µ–º–∞ –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è** - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ API –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ proto —Ñ–∞–π–ª–æ–≤
- **–£–¥–æ–±—Å—Ç–≤–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏** - –≥–æ—Ç–æ–≤—ã–µ —Ö—É–∫–∏ –¥–ª—è React Query
- **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

---

**–î–∞—Ç–∞:** 11 –∏—é–ª—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ  
**–°–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏